stages:
    - build
    - test

before_script:
    - chmod +x ./gradlew
    - export GRADLE_USER_HOME=`pwd`/.gradle

build:
    stage: build
    image: openjdk:11.0.3-jdk-stretch
    script:
        - ./gradlew build -x test
    artifacts:
        name: "${CI_PROJECT_NAME}_${CI_COMMIT_REF_NAME}"
        paths:
            - build/libs/*.jar

test:
    stage: test
    image: openjdk:11.0.3-jdk-stretch
    script:
        - ./gradlew test
        - ./gradlew jacocoTestReport
